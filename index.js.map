{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["// Описаний у документації\nimport SimpleLightbox from \"simplelightbox\";\n// Додатковий імпорт стилів\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nlet galleryShow = new SimpleLightbox('.gallery a', {\n    captionsData: \"alt\",\n    captionDelay: 250,\n});\n\ngalleryShow.on('shown.simplelightbox', function () {\n\t\n});\n\nlet gallery = document.querySelector(\".gallery\");\n\nexport function drawGallery (imageArray){\n\n    let markup = imageArray.map(image => \n        `\n        <li class=\"gallery-item\">\n            <a href=\"${image.largeImageURL}\" class=\"gallery-link\">\n                <img \n                class=\"gallery-image\"\n                src=\"${image.webformatURL}\" \n                alt=\"${image.tags}\"\n                data-source=\"${image.largeImageURL}\"\n                >\n            </a>\n            <div class=\"image-info\">\n                <div class=\"image-info-element\">\n                    <b>Likes</b>\n                    <p>${image.likes}</p>\n                </div>\n                <div class=\"image-info-element\">\n                    <b>Views</b>\n                    <p>${image.views}</p>\n                </div>\n                <div class=\"image-info-element\">\n                    <b>Comments</b>\n                    <p>${image.comments}</p>\n                </div>\n                <div class=\"image-info-element\">\n                    <b>Downloads</b>\n                    <p>${image.downloads}</p>\n                </div>\n            </div>\n        </li>\n        `\n    ).join(\"\");\n    gallery.insertAdjacentHTML(\"beforeend\", markup);\n    galleryShow.refresh();\n}\n\nexport function clearGallery(){\n    gallery.innerHTML = \"\";\n}\n","import axios from \"axios\";\n\nexport async function getPhotos(word, currentPage){\n    try{\n        let response = await axios.get(\"https://pixabay.com/api/\",{\n            params:{\n                key: \"49450031-b4478c296ebc20935df165a9a\",\n                q: word,\n                image_type: \"photo\",\n                orientation: \"horizontal\",\n                safesearch: true,\n                per_page: 15,\n                page: currentPage\n            }\n        });\n        return response.data;\n    } catch(error){\n        // console.error(error);\n        return null;\n    }\n}","// Описаний у документації\nimport iziToast from \"izitoast\";\n// Додатковий імпорт стилів\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport {drawGallery, clearGallery} from './js/render-functions';\nimport {getPhotos} from './js/pixabay-api';\n\nlet form = document.querySelector(\".form\");\nlet input = document.querySelector('[name=\"search-text\"]');\nlet loader = document.querySelector(\".loader\");\nlet loadBtn = document.querySelector(\".load-btn\");\nlet response;\nlet currentPage = 1;\nlet inputValue;\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n    loader.style.display = \"none\";\n  });\n\nform.addEventListener(\"submit\", async (event)=>{\n    event.preventDefault();\n    inputValue = input.value;\n    currentPage = 1;\n    if(inputValue.trim() === \"\"){\n        // console.log(\"Заповніть поле пошуку\");\n        return;\n    }\n    clearGallery();\n    loader.style.display = \"block\";\n\n    try{\n        response = await getPhotos(inputValue, currentPage);\n        let images = response.hits;\n\n        if(images.length > 0){\n        // console.log(response.data)\n        drawGallery(images);\n\n        let totalPages = Math.ceil(response.totalHits / 15);\n        // console.log(totalPages);\n        if(totalPages < 0){\n            loadBtn.style.display = \"none\";\n        } else {\n            loadBtn.style.display = \"flex\";\n        }\n        } else {\n            loadBtn.style.display = \"none\";\n            iziToast.show({\n                message: `Sorry, there are no images matching your ${inputValue}. Please try again!`,   \n                backgroundColor:'#EF4040',\n                messageColor: '#FFBEBE',\n                position: 'topRight',\n                icon: 'fa-solid fa-ban',  \n            });\n        }\n    } catch(error) {\n            // console.error(error);\n    } finally{\n        loader.style.display = \"none\";\n    }\n});\n\nloadBtn.addEventListener(\"click\", async () =>{\n    currentPage++;\n    loader.style.display = \"block\";\n    loadBtn.style.display = \"none\";\n    \n    try{\n        let totalPages = Math.ceil(response.totalHits / 15);\n\n    if(currentPage <= totalPages){\n\n        response = await getPhotos(inputValue, currentPage);\n        let images = response.hits;\n\n        drawGallery(images);\n\n        loadBtn.style.display = \"flex\";\n\n        setTimeout(() => {\n            let item = document.querySelector(\".gallery-item\");\n            let rect = item.getBoundingClientRect();\n            // console.log(((rect.height * 3) + (3 * 16)));\n                window.scrollBy({\n                    top: (rect.height * 2) + (2 * 16),\n                    behavior: \"smooth\",\n                });\n        }, 300);\n        //без setTimeout воно проскролить до того як домалювало всі елементи на сторінку\n            \n                \n            \n        if(currentPage >= totalPages) {\n            loadBtn.style.display = \"none\"\n            iziToast.show({\n                message: `We're sorry, but you've reached the end of search results.`,   \n                backgroundColor:'#1E90FF',\n                messageColor: '#FFFFFF',\n                position: 'topRight',\n                icon: 'fa-solid fa-ban',  \n            });\n        };\n    } else {\n        loadBtn.style.display = \"none\";\n        loader.style.display = \"none\";\n        iziToast.show({\n            message: `We're sorry, but you've reached the end of search results.`,   \n            backgroundColor:'#1E90FF',\n            messageColor: '#FFFFFF',\n            position: 'topRight',\n            icon: 'fa-solid fa-ban',  \n        });\n    }\n} catch(error){\n    // console.error(error);\n} finally {\n    loader.style.display = \"none\";\n}\n});"],"names":["galleryShow","SimpleLightbox","gallery","drawGallery","imageArray","markup","image","clearGallery","getPhotos","word","currentPage","axios","form","input","loader","loadBtn","response","inputValue","event","images","iziToast","totalPages","rect"],"mappings":"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"}