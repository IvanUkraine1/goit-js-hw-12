{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["// Описаний у документації\nimport SimpleLightbox from \"simplelightbox\";\n// Додатковий імпорт стилів\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nlet galleryShow = new SimpleLightbox('.gallery a', {\n    captionsData: \"alt\",\n    captionDelay: 250,\n});\n\ngalleryShow.on('shown.simplelightbox', function () {\n\t\n});\n\nexport function drawGallery (imageArray){\n    let gallery = document.querySelector(\".gallery\");\n\n    let markup = imageArray.map(image => \n        `\n        <li class=\"gallery-item\">\n            <a href=\"${image.largeImageURL}\" class=\"gallery-link\">\n                <img \n                class=\"gallery-image\"\n                src=\"${image.webformatURL}\" \n                alt=\"${image.tags}\"\n                data-source=\"${image.largeImageURL}\"\n                >\n            </a>\n            <div class=\"image-info\">\n                <div class=\"image-info-element\">\n                    <b>Likes</b>\n                    <p>${image.likes}</p>\n                </div>\n                <div class=\"image-info-element\">\n                    <b>Views</b>\n                    <p>${image.views}</p>\n                </div>\n                <div class=\"image-info-element\">\n                    <b>Comments</b>\n                    <p>${image.comments}</p>\n                </div>\n                <div class=\"image-info-element\">\n                    <b>Downloads</b>\n                    <p>${image.downloads}</p>\n                </div>\n            </div>\n        </li>\n        `\n    ).join(\"\");\n    gallery.insertAdjacentHTML(\"beforeend\", markup);\n    galleryShow.refresh();\n}\n\n","import axios from \"axios\";\n\nexport async function getPhotos(word, currentPage){\n    try{\n        return axios.get(\"https://pixabay.com/api/\",{\n            params:{\n                key: \"49450031-b4478c296ebc20935df165a9a\",\n                q: word,\n                image_type: \"photo\",\n                orientation: \"horizontal\",\n                safesearch: true,\n                per_page: 15,\n                page: currentPage\n            }\n        });\n    } catch(error){\n        // console.error(error);\n        return null;\n    }\n}\n\nexport async function getTotalHits(word){\n    try{\n        let response = await axios.get(\"https://pixabay.com/api/\",{\n            params:{\n                key: \"49450031-b4478c296ebc20935df165a9a\",\n                q: word,\n                image_type: \"photo\",\n                orientation: \"horizontal\",\n                safesearch: true,\n            }\n        });\n        return Math.ceil(response.data.totalHits / 15);\n    } catch{\n        // console.error(error);\n        return 1;\n    }\n}","// Описаний у документації\nimport iziToast from \"izitoast\";\n// Додатковий імпорт стилів\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport {drawGallery} from './js/render-functions';\nimport { getPhotos, getTotalHits } from './js/pixabay-api';\n\nlet gallery = document.querySelector(\".gallery\");\nlet form = document.querySelector(\".form\");\nlet input = document.querySelector('[name=\"search-text\"]');\nlet loader = document.querySelector(\".loader\");\nlet loadBtn = document.querySelector(\".load-btn\");\nlet currentPage = 1;\nlet inputValue;\n\nloader.style.display = \"none\";\n\nform.addEventListener(\"submit\", async (event)=>{\n    event.preventDefault();\n    inputValue = input.value;\n    currentPage = 1;\n    if(inputValue.trim() === \"\"){\n        // console.log(\"Заповніть поле пошуку\");\n        return;\n    }\n    gallery.innerHTML = \"\";\n    loader.style.display = \"block\";\n\n    try{\n        let response = await getPhotos(inputValue, currentPage);\n        let images = response.data.hits;\n\n        if(images.length > 0){\n        // console.log(response.data)\n        drawGallery(images);\n\n        let totalPages = await getTotalHits(inputValue);\n        // console.log(totalPages);\n        if(totalPages < 0){\n            loadBtn.style.display = \"none\";\n        } else {\n            loadBtn.style.display = \"flex\";\n        }\n        } else {\n            loadBtn.style.display = \"none\";\n            iziToast.show({\n                message: `Sorry, there are no images matching your ${inputValue}. Please try again!`,   \n                backgroundColor:'#EF4040',\n                messageColor: '#FFBEBE',\n                position: 'topRight',\n                icon: 'fa-solid fa-ban',  \n            });\n        }\n    } catch(error) {\n            // console.error(error);\n    } finally{\n        loader.style.display = \"none\";\n    }\n});\n\nloadBtn.addEventListener(\"click\", async () =>{\n    currentPage++;\n    loader.style.display = \"block\";\n\n    try{\n    let totalPages = await getTotalHits(inputValue);\n\n    if(currentPage <= totalPages){\n        let initialItemsCount = document.querySelectorAll(\".gallery-item\").length;\n        let response = await getPhotos(inputValue, currentPage);\n        let images = response.data.hits;\n\n            drawGallery(images);\n\n            setTimeout(() => {\n                let items = document.querySelectorAll(\".gallery-item\");\n                if (items.length > initialItemsCount) {\n                    let rect = items[initialItemsCount].getBoundingClientRect();\n                    // console.log(rect.height);\n                    window.scrollBy({\n                        top: (rect.height * 3) + (3 * 16),\n                        behavior: \"smooth\",\n                    });\n                }\n            }, 300);\n            \n                \n            \n        if(currentPage >= totalPages) {\n            loadBtn.style.display = \"none\"\n            iziToast.show({\n                message: `We're sorry, but you've reached the end of search results.`,   \n                backgroundColor:'#1E90FF',\n                messageColor: '#FFFFFF',\n                position: 'topRight',\n                icon: 'fa-solid fa-ban',  \n            });\n        };\n    } else {\n        loadBtn.style.display = \"none\";\n        loader.style.display = \"none\";\n        iziToast.show({\n            message: `We're sorry, but you've reached the end of search results.`,   \n            backgroundColor:'#1E90FF',\n            messageColor: '#FFFFFF',\n            position: 'topRight',\n            icon: 'fa-solid fa-ban',  \n        });\n    }\n} catch(error){\n    // console.error(error);\n} finally {\n    loader.style.display = \"none\";\n}\n});"],"names":["galleryShow","SimpleLightbox","drawGallery","imageArray","gallery","markup","image","getPhotos","word","currentPage","axios","getTotalHits","response","form","input","loader","loadBtn","inputValue","event","images","iziToast","totalPages","initialItemsCount","items","rect"],"mappings":"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"}